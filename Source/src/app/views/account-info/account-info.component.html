<app-page-title title="Account"></app-page-title>
<ng-container *ngIf="{ hash: accountHash | async } as acc">
  <ng-container *ngIf="acc.hash">
    <div class="grid grid-cols-1 sm:grid-cols-6 gap-4 text-sm">
      <ng-container *ngIf="{ info: accountInfo | async } as account">
        <div class="weown-card__brand sm:col-span-4">
          <div>Account hash:</div>
          <div class="font-bold truncate">
            {{ account?.info?.hash }}
          </div>
        </div>
        <div class="weown-card__white sm:col-span-2">
          <div>Transfers:</div>
          <div class="font-bold truncate">
            {{ account?.info?.transfersCount }}
          </div>
        </div>
        <div class="weown-card__accent sm:col-span-4">
          <div>Controller address:</div>
          <div class="font-bold truncate">
            <a class="text-secondary" [routerLink]="['/address', account?.info?.controllerAddress]">
              {{ account?.info?.controllerAddress }}
            </a>
          </div>
        </div>
        <div class="weown-card__white sm:col-span-2">
          <div>Nr. of assets:</div>
          <div class="font-bold truncate">
            {{ account?.info?.assetsCount }}
          </div>
        </div>
        <div class="sm:col-span-6">
          <app-table-card
            title="Transfers"
            [tableHeight]="tableHeight"
            [columns]="transferColumns"
            [source]="transfers | async"
            [loading]="transfersLoading | async"
            [canLoadMore]="transfersCanLoad | async"
            (loadMore)="onLoadMore(acc.hash, 'transfers')"
          >
          </app-table-card>
        </div>
        <div class="sm:col-span-6">
          <app-table-card
            title="Holdings"
            [tableHeight]="tableHeight"
            [columns]="holdingColumns"
            [source]="holdings | async"
            [loading]="holdingsLoading | async"
            [canLoadMore]="holdingsCanLoad | async"
            (loadMore)="onLoadMore(acc.hash, 'holdings')"
          >
          </app-table-card>
        </div>
      </ng-container>
    </div>
  </ng-container>
</ng-container>

<ng-template #tx let-row="row" let-value="value">
  <a [routerLink]="['/tx', value]" [title]="value">{{ value }}</a>
</ng-template>

<ng-template #account let-row="row" let-value="value">
  <a [routerLink]="['/account', value]" [title]="value">{{ value }}</a>
</ng-template>

<ng-template #asset let-row="row" let-value="value">
  <a [routerLink]="['/asset', value]" [title]="value">{{ value }}</a>
</ng-template>

<ng-template #assetCode let-row="row" let-value="value">
  {{ value }}
</ng-template>
